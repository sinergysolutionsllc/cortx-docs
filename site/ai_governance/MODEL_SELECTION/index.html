
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>AI Model Selection & Routing Strategy - CORTX by Sinergy</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2a3383ac.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ai-model-selection-routing-strategy" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="CORTX by Sinergy" class="md-header__button md-logo" aria-label="CORTX by Sinergy" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CORTX by Sinergy
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              AI Model Selection &amp; Routing Strategy
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="CORTX by Sinergy" class="md-nav__button md-logo" aria-label="CORTX by Sinergy" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    CORTX by Sinergy
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Services
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Platform Services
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Gateway
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Gateway
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/gateway/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gateway (8080)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/gateway/openapi.yaml" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenAPI (YAML)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/gateway/openapi.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenAPI (Redoc)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Identity
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Identity
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/identity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Identity (8082)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/identity/openapi.yaml" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenAPI (YAML)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/identity/openapi.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenAPI (Redoc)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Validation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Validation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/validation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Validation (8083)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/validation/openapi.yaml" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenAPI (YAML)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/validation/openapi.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenAPI (Redoc)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    AI Broker
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            AI Broker
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/ai-broker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AI Broker (8085)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/ai-broker/openapi.yaml" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenAPI (YAML)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/ai-broker/openapi.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenAPI (Redoc)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Workflow
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            Workflow
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Workflow (8130)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/workflow/openapi.yaml" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenAPI (YAML)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/workflow/openapi.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenAPI (Redoc)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7" >
        
          
          <label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Compliance
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            Compliance
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/compliance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Compliance (8135)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/compliance/openapi.yaml" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenAPI (YAML)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/compliance/openapi.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenAPI (Redoc)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
        
          
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Ledger
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            Ledger
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/ledger/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ledger (8136)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/ledger/openapi.yaml" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenAPI (YAML)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/ledger/openapi.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenAPI (Redoc)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_9" >
        
          
          <label class="md-nav__link" for="__nav_3_9" id="__nav_3_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    OCR
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_9">
            <span class="md-nav__icon md-icon"></span>
            OCR
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/ocr/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OCR (8137)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/ocr/openapi.yaml" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenAPI (YAML)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/ocr/openapi.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenAPI (Redoc)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_10" >
        
          
          <label class="md-nav__link" for="__nav_3_10" id="__nav_3_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    RAG
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_10">
            <span class="md-nav__icon md-icon"></span>
            RAG
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/rag/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RAG (8138)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/rag/openapi.yaml" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenAPI (YAML)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/rag/openapi.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenAPI (Redoc)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../suites/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Suites
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../packs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Packs
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sdks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SDKs
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Operations
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adrs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADRs
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../rfcs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RFCs
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#purpose" class="md-nav__link">
    <span class="md-ellipsis">
      Purpose
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model-inventory" class="md-nav__link">
    <span class="md-ellipsis">
      Model Inventory
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Model Inventory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#currently-supported" class="md-nav__link">
    <span class="md-ellipsis">
      Currently Supported
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Currently Supported">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#google-gemini-15-flash" class="md-nav__link">
    <span class="md-ellipsis">
      Google Gemini 1.5 Flash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#google-gemini-15-pro" class="md-nav__link">
    <span class="md-ellipsis">
      Google Gemini 1.5 Pro
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#planned-q1-q2-2026" class="md-nav__link">
    <span class="md-ellipsis">
      Planned (Q1-Q2 2026)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Planned (Q1-Q2 2026)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#anthropic-claude-35-sonnet" class="md-nav__link">
    <span class="md-ellipsis">
      Anthropic Claude 3.5 Sonnet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#openai-gpt-4-turbo" class="md-nav__link">
    <span class="md-ellipsis">
      OpenAI GPT-4 Turbo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws-bedrock-claude-titan" class="md-nav__link">
    <span class="md-ellipsis">
      AWS Bedrock (Claude, Titan)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#future-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Future Considerations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Future Considerations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hugging-face-hosted-models" class="md-nav__link">
    <span class="md-ellipsis">
      Hugging Face Hosted Models
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#on-premises-models" class="md-nav__link">
    <span class="md-ellipsis">
      On-Premises Models
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model-routing-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Model Routing Strategy
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Model Routing Strategy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#decision-tree" class="md-nav__link">
    <span class="md-ellipsis">
      Decision Tree
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#routing-rules" class="md-nav__link">
    <span class="md-ellipsis">
      Routing Rules
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Routing Rules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#by-task-type" class="md-nav__link">
    <span class="md-ellipsis">
      By Task Type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#by-latency-requirement" class="md-nav__link">
    <span class="md-ellipsis">
      By Latency Requirement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#by-cost-sensitivity" class="md-nav__link">
    <span class="md-ellipsis">
      By Cost Sensitivity
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prompt-templates" class="md-nav__link">
    <span class="md-ellipsis">
      Prompt Templates
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prompt Templates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#template-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Template Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#template-library" class="md-nav__link">
    <span class="md-ellipsis">
      Template Library
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Template Library">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rulepack-validation-explanation" class="md-nav__link">
    <span class="md-ellipsis">
      RulePack Validation Explanation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#workflowpack-generation" class="md-nav__link">
    <span class="md-ellipsis">
      WorkflowPack Generation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#code-generation" class="md-nav__link">
    <span class="md-ellipsis">
      Code Generation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compliance-qa" class="md-nav__link">
    <span class="md-ellipsis">
      Compliance Q&amp;A
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quality-controls" class="md-nav__link">
    <span class="md-ellipsis">
      Quality Controls
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quality Controls">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reproducibility" class="md-nav__link">
    <span class="md-ellipsis">
      Reproducibility
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output-validation" class="md-nav__link">
    <span class="md-ellipsis">
      Output Validation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hallucination-detection" class="md-nav__link">
    <span class="md-ellipsis">
      Hallucination Detection
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cost-management" class="md-nav__link">
    <span class="md-ellipsis">
      Cost Management
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Cost Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#budget-tracking" class="md-nav__link">
    <span class="md-ellipsis">
      Budget Tracking
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#model-pricing" class="md-nav__link">
    <span class="md-ellipsis">
      Model Pricing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cost-optimization" class="md-nav__link">
    <span class="md-ellipsis">
      Cost Optimization
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#monitoring-alerting" class="md-nav__link">
    <span class="md-ellipsis">
      Monitoring &amp; Alerting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Monitoring &amp; Alerting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      Key Metrics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dashboards" class="md-nav__link">
    <span class="md-ellipsis">
      Dashboards
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alerts" class="md-nav__link">
    <span class="md-ellipsis">
      Alerts
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fallback-resilience" class="md-nav__link">
    <span class="md-ellipsis">
      Fallback &amp; Resilience
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Fallback &amp; Resilience">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#model-fallback-chain" class="md-nav__link">
    <span class="md-ellipsis">
      Model Fallback Chain
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#circuit-breaker" class="md-nav__link">
    <span class="md-ellipsis">
      Circuit Breaker
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compliance-governance" class="md-nav__link">
    <span class="md-ellipsis">
      Compliance &amp; Governance
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Compliance &amp; Governance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#model-approval-process" class="md-nav__link">
    <span class="md-ellipsis">
      Model Approval Process
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Data Handling
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#changelog" class="md-nav__link">
    <span class="md-ellipsis">
      Changelog
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contact" class="md-nav__link">
    <span class="md-ellipsis">
      Contact
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="ai-model-selection-routing-strategy">AI Model Selection &amp; Routing Strategy</h1>
<p><strong>Version:</strong> 1.0.0
<strong>Last Updated:</strong> 2025-10-01
<strong>Owner:</strong> AI Platform Team
<strong>Classification:</strong> Internal</p>
<hr />
<h2 id="purpose">Purpose</h2>
<p>This document defines the strategy for selecting, routing, and managing AI models across the CORTX Platform. It establishes criteria for model selection based on use case, cost, latency, quality, and compliance requirements.</p>
<hr />
<h2 id="model-inventory">Model Inventory</h2>
<h3 id="currently-supported">Currently Supported</h3>
<h4 id="google-gemini-15-flash">Google Gemini 1.5 Flash</h4>
<p><strong>Provider:</strong> Google Cloud Vertex AI
<strong>Status:</strong> ✅ Production (Default)</p>
<p><strong>Specifications:</strong>
- <strong>Context Window:</strong> 1M tokens
- <strong>Output Limit:</strong> 8,192 tokens
- <strong>Latency:</strong> p50: 250ms, p95: 500ms, p99: 800ms
- <strong>Cost:</strong> $0.00001875/1K input tokens, $0.000075/1K output tokens
- <strong>Strengths:</strong> Fast, cost-effective, good for routine tasks
- <strong>Limitations:</strong> Lower reasoning quality for complex tasks</p>
<p><strong>Use Cases:</strong>
- RulePack validation explanations
- Simple Q&amp;A (platform documentation)
- Quick compliance lookups
- Pack template generation
- Basic code suggestions</p>
<p><strong>Configuration:</strong></p>
<pre><code class="language-python">GEMINI_FLASH_CONFIG = {
    &quot;model&quot;: &quot;gemini-1.5-flash&quot;,
    &quot;temperature&quot;: 0.0,  # Deterministic for reproducibility
    &quot;top_p&quot;: 0.95,
    &quot;top_k&quot;: 40,
    &quot;max_output_tokens&quot;: 2048,
    &quot;safety_settings&quot;: {
        &quot;HARM_CATEGORY_HATE_SPEECH&quot;: &quot;BLOCK_MEDIUM_AND_ABOVE&quot;,
        &quot;HARM_CATEGORY_DANGEROUS_CONTENT&quot;: &quot;BLOCK_MEDIUM_AND_ABOVE&quot;,
        &quot;HARM_CATEGORY_SEXUALLY_EXPLICIT&quot;: &quot;BLOCK_MEDIUM_AND_ABOVE&quot;,
        &quot;HARM_CATEGORY_HARASSMENT&quot;: &quot;BLOCK_MEDIUM_AND_ABOVE&quot;
    }
}
</code></pre>
<h4 id="google-gemini-15-pro">Google Gemini 1.5 Pro</h4>
<p><strong>Provider:</strong> Google Cloud Vertex AI
<strong>Status:</strong> ✅ Production (Premium)</p>
<p><strong>Specifications:</strong>
- <strong>Context Window:</strong> 1M tokens
- <strong>Output Limit:</strong> 8,192 tokens
- <strong>Latency:</strong> p50: 600ms, p95: 1200ms, p99: 1800ms
- <strong>Cost:</strong> $0.000125/1K input tokens, $0.000375/1K output tokens
- <strong>Strengths:</strong> Higher quality reasoning, complex tasks
- <strong>Limitations:</strong> Higher cost, slower</p>
<p><strong>Use Cases:</strong>
- Complex WorkflowPack generation
- Multi-step reasoning tasks
- Advanced code generation
- Compliance policy analysis
- AI-assisted workflow design</p>
<p><strong>Configuration:</strong></p>
<pre><code class="language-python">GEMINI_PRO_CONFIG = {
    &quot;model&quot;: &quot;gemini-1.5-pro&quot;,
    &quot;temperature&quot;: 0.2,  # Slight creativity for complex tasks
    &quot;top_p&quot;: 0.95,
    &quot;top_k&quot;: 40,
    &quot;max_output_tokens&quot;: 4096,
    &quot;safety_settings&quot;: {
        &quot;HARM_CATEGORY_HATE_SPEECH&quot;: &quot;BLOCK_MEDIUM_AND_ABOVE&quot;,
        &quot;HARM_CATEGORY_DANGEROUS_CONTENT&quot;: &quot;BLOCK_MEDIUM_AND_ABOVE&quot;,
        &quot;HARM_CATEGORY_SEXUALLY_EXPLICIT&quot;: &quot;BLOCK_MEDIUM_AND_ABOVE&quot;,
        &quot;HARM_CATEGORY_HARASSMENT&quot;: &quot;BLOCK_MEDIUM_AND_ABOVE&quot;
    }
}
</code></pre>
<h3 id="planned-q1-q2-2026">Planned (Q1-Q2 2026)</h3>
<h4 id="anthropic-claude-35-sonnet">Anthropic Claude 3.5 Sonnet</h4>
<p><strong>Provider:</strong> Anthropic API
<strong>Status:</strong> 📋 Planned Q1 2026</p>
<p><strong>Specifications:</strong>
- <strong>Context Window:</strong> 200K tokens
- <strong>Output Limit:</strong> 4,096 tokens
- <strong>Latency (estimated):</strong> p50: 800ms, p95: 1500ms, p99: 2200ms
- <strong>Cost:</strong> $0.003/1K input tokens, $0.015/1K output tokens
- <strong>Strengths:</strong> Highest quality code generation, superior reasoning
- <strong>Limitations:</strong> Highest cost, smaller context window</p>
<p><strong>Planned Use Cases:</strong>
- Production-quality code generation
- Complex compliance reasoning
- Critical decision support
- High-stakes workflow design
- Architecture recommendations</p>
<h4 id="openai-gpt-4-turbo">OpenAI GPT-4 Turbo</h4>
<p><strong>Provider:</strong> OpenAI API
<strong>Status:</strong> 📋 Planned Q2 2026</p>
<p><strong>Specifications:</strong>
- <strong>Context Window:</strong> 128K tokens
- <strong>Output Limit:</strong> 4,096 tokens
- <strong>Latency (estimated):</strong> p50: 700ms, p95: 1400ms, p99: 2000ms
- <strong>Cost:</strong> $0.01/1K input tokens, $0.03/1K output tokens
- <strong>Strengths:</strong> Strong general reasoning, good tool use
- <strong>Limitations:</strong> Higher cost</p>
<p><strong>Planned Use Cases:</strong>
- Advanced reasoning tasks
- Multi-modal analysis (if needed)
- Complex data analysis
- Enterprise customer preference</p>
<h4 id="aws-bedrock-claude-titan">AWS Bedrock (Claude, Titan)</h4>
<p><strong>Provider:</strong> AWS Bedrock
<strong>Status:</strong> 🔮 Roadmap (Phase 3)</p>
<p><strong>Rationale:</strong> Enterprise customers requiring AWS infrastructure
<strong>Models:</strong> Claude 3 family, Amazon Titan
<strong>Benefits:</strong> AWS ecosystem integration, enterprise SLAs</p>
<h3 id="future-considerations">Future Considerations</h3>
<h4 id="hugging-face-hosted-models">Hugging Face Hosted Models</h4>
<p><strong>Status:</strong> 🔮 Research</p>
<p><strong>Candidates:</strong>
- <code>mistralai/Mixtral-8x7B-Instruct-v0.1</code>
- <code>meta-llama/Llama-3-70B-Instruct</code>
- <code>google/flan-t5-xxl</code></p>
<p><strong>Benefits:</strong> Open source, lower cost, customizable
<strong>Challenges:</strong> Quality variability, hosting complexity</p>
<h4 id="on-premises-models">On-Premises Models</h4>
<p><strong>Status:</strong> 🔮 Phase 4 (2027+)</p>
<p><strong>Use Case:</strong> Air-gapped government deployments
<strong>Requirements:</strong> GPU infrastructure, model serving platform
<strong>Candidates:</strong> Llama 3, Mixtral, custom fine-tuned models</p>
<hr />
<h2 id="model-routing-strategy">Model Routing Strategy</h2>
<h3 id="decision-tree">Decision Tree</h3>
<pre><code class="language-python">async def select_model(
    task_type: str,
    complexity: str,
    latency_requirement: str,
    cost_sensitivity: str,
    tenant_preferences: dict
) -&gt; str:
    &quot;&quot;&quot;Select optimal model based on task characteristics.

    Args:
        task_type: Type of task (e.g., &quot;code_generation&quot;, &quot;explanation&quot;, &quot;qa&quot;)
        complexity: Task complexity (&quot;simple&quot;, &quot;moderate&quot;, &quot;complex&quot;)
        latency_requirement: Latency tolerance (&quot;low&quot;, &quot;medium&quot;, &quot;high&quot;)
        cost_sensitivity: Cost consideration (&quot;low&quot;, &quot;medium&quot;, &quot;high&quot;)
        tenant_preferences: Tenant-specific model preferences

    Returns:
        Model identifier (e.g., &quot;gemini-1.5-flash&quot;)
    &quot;&quot;&quot;
    # 1. Check tenant preferences (enterprise customers may specify)
    if tenant_preferences.get(&quot;preferred_model&quot;):
        return tenant_preferences[&quot;preferred_model&quot;]

    # 2. Apply routing rules
    if task_type == &quot;code_generation&quot; and complexity == &quot;complex&quot;:
        return &quot;claude-3.5-sonnet&quot;  # Highest quality code
    elif task_type == &quot;explanation&quot; and complexity == &quot;simple&quot;:
        return &quot;gemini-1.5-flash&quot;  # Fast, cost-effective
    elif task_type == &quot;workflow_design&quot; and complexity in [&quot;moderate&quot;, &quot;complex&quot;]:
        return &quot;gemini-1.5-pro&quot;  # Good balance
    elif latency_requirement == &quot;low&quot; and cost_sensitivity == &quot;high&quot;:
        return &quot;gemini-1.5-flash&quot;  # Fastest, cheapest
    elif complexity == &quot;complex&quot; and cost_sensitivity == &quot;low&quot;:
        return &quot;claude-3.5-sonnet&quot;  # Best quality
    else:
        return &quot;gemini-1.5-pro&quot;  # Default production model

    # Default fallback
    return &quot;gemini-1.5-flash&quot;
</code></pre>
<h3 id="routing-rules">Routing Rules</h3>
<h4 id="by-task-type">By Task Type</h4>
<table>
<thead>
<tr>
<th>Task Type</th>
<th>Simple</th>
<th>Moderate</th>
<th>Complex</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Code Generation</strong></td>
<td>Gemini Flash</td>
<td>Gemini Pro</td>
<td>Claude Sonnet</td>
</tr>
<tr>
<td><strong>Explanation</strong></td>
<td>Gemini Flash</td>
<td>Gemini Flash</td>
<td>Gemini Pro</td>
</tr>
<tr>
<td><strong>Q&amp;A</strong></td>
<td>Gemini Flash</td>
<td>Gemini Flash</td>
<td>Gemini Pro</td>
</tr>
<tr>
<td><strong>Workflow Design</strong></td>
<td>Gemini Flash</td>
<td>Gemini Pro</td>
<td>Claude Sonnet</td>
</tr>
<tr>
<td><strong>Compliance Analysis</strong></td>
<td>Gemini Flash</td>
<td>Gemini Pro</td>
<td>Claude Sonnet</td>
</tr>
<tr>
<td><strong>Data Analysis</strong></td>
<td>Gemini Flash</td>
<td>Gemini Pro</td>
<td>GPT-4 Turbo</td>
</tr>
</tbody>
</table>
<h4 id="by-latency-requirement">By Latency Requirement</h4>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Model Choice</th>
<th>Max Latency (p99)</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Low</strong> (&lt;500ms)</td>
<td>Gemini Flash</td>
<td>800ms</td>
</tr>
<tr>
<td><strong>Medium</strong> (&lt;1500ms)</td>
<td>Gemini Pro</td>
<td>1800ms</td>
</tr>
<tr>
<td><strong>High</strong> (&gt;1500ms)</td>
<td>Claude Sonnet</td>
<td>2200ms</td>
</tr>
</tbody>
</table>
<h4 id="by-cost-sensitivity">By Cost Sensitivity</h4>
<table>
<thead>
<tr>
<th>Sensitivity</th>
<th>Model Choice</th>
<th>Cost/1M Tokens (Input)</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>High</strong> (minimize cost)</td>
<td>Gemini Flash</td>
<td>$18.75</td>
</tr>
<tr>
<td><strong>Medium</strong> (balance)</td>
<td>Gemini Pro</td>
<td>$125</td>
</tr>
<tr>
<td><strong>Low</strong> (maximize quality)</td>
<td>Claude Sonnet</td>
<td>$3,000</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="prompt-templates">Prompt Templates</h2>
<h3 id="template-structure">Template Structure</h3>
<pre><code class="language-python">from typing import Dict, List

class PromptTemplate:
    &quot;&quot;&quot;Structured prompt template with variables.&quot;&quot;&quot;

    def __init__(
        self,
        template_id: str,
        system_prompt: str,
        user_prompt_template: str,
        variables: List[str],
        recommended_model: str,
        temperature: float = 0.0
    ):
        self.template_id = template_id
        self.system_prompt = system_prompt
        self.user_prompt_template = user_prompt_template
        self.variables = variables
        self.recommended_model = recommended_model
        self.temperature = temperature

    def render(self, **kwargs) -&gt; Dict[str, str]:
        &quot;&quot;&quot;Render template with provided variables.&quot;&quot;&quot;
        missing = set(self.variables) - set(kwargs.keys())
        if missing:
            raise ValueError(f&quot;Missing required variables: {missing}&quot;)

        user_prompt = self.user_prompt_template.format(**kwargs)

        return {
            &quot;system_prompt&quot;: self.system_prompt,
            &quot;user_prompt&quot;: user_prompt,
            &quot;model&quot;: self.recommended_model,
            &quot;temperature&quot;: self.temperature
        }
</code></pre>
<h3 id="template-library">Template Library</h3>
<h4 id="rulepack-validation-explanation">RulePack Validation Explanation</h4>
<pre><code class="language-python">RULEPACK_EXPLANATION_TEMPLATE = PromptTemplate(
    template_id=&quot;rulepack_explanation_v1&quot;,
    system_prompt=&quot;&quot;&quot;You are a compliance expert assistant for the CORTX Platform.
Your role is to explain RulePack validation failures in plain language, referencing
the relevant regulatory requirements and suggesting corrections.

Use the provided RAG context about compliance frameworks.
Be specific, actionable, and cite regulatory codes when applicable.&quot;&quot;&quot;,

    user_prompt_template=&quot;&quot;&quot;Explain this validation failure:

**Rule ID:** {rule_id}
**Field:** {field}
**Failed Value:** {failed_value}
**Error Message:** {error_message}

**Compliance Context:**
{rag_context}

Provide:
1. What went wrong (plain language)
2. Why this rule exists (regulatory requirement)
3. How to fix it (specific steps)&quot;&quot;&quot;,

    variables=[&quot;rule_id&quot;, &quot;field&quot;, &quot;failed_value&quot;, &quot;error_message&quot;, &quot;rag_context&quot;],
    recommended_model=&quot;gemini-1.5-flash&quot;,
    temperature=0.0
)
</code></pre>
<h4 id="workflowpack-generation">WorkflowPack Generation</h4>
<pre><code class="language-python">WORKFLOW_GENERATION_TEMPLATE = PromptTemplate(
    template_id=&quot;workflow_generation_v1&quot;,
    system_prompt=&quot;&quot;&quot;You are a workflow design expert for the CORTX Platform.
You create WorkflowPacks (YAML) from natural language descriptions.

Follow the WorkflowPack schema strictly. Use appropriate node types:
- data-source: Ingest data
- validation: Execute RulePack
- calculation: Perform computations
- decision: Conditional branching
- approval: Human-in-the-loop
- ai-inference: AI model calls
- data-sink: Output results

Ensure compliance with regulatory frameworks when applicable.&quot;&quot;&quot;,

    user_prompt_template=&quot;&quot;&quot;Create a WorkflowPack for this requirement:

**Description:** {description}

**Compliance Requirements:** {compliance_requirements}

**Available RulePacks:** {available_rulepacks}

**RAG Context:**
{rag_context}

Generate a complete WorkflowPack YAML following the schema.
Include metadata, steps with appropriate types, and configurations.&quot;&quot;&quot;,

    variables=[&quot;description&quot;, &quot;compliance_requirements&quot;, &quot;available_rulepacks&quot;, &quot;rag_context&quot;],
    recommended_model=&quot;gemini-1.5-pro&quot;,
    temperature=0.2
)
</code></pre>
<h4 id="code-generation">Code Generation</h4>
<pre><code class="language-python">CODE_GENERATION_TEMPLATE = PromptTemplate(
    template_id=&quot;code_generation_v1&quot;,
    system_prompt=&quot;&quot;&quot;You are an expert Python/TypeScript developer for the CORTX Platform.

Follow these strict rules:
- Use type hints (Python) or TypeScript strict mode
- Include comprehensive error handling
- Add unit tests for all functions
- Follow PEP 8 (Python) or Airbnb style (TypeScript)
- Include docstrings with examples
- Implement proper logging with correlation IDs
- Never include secrets or hardcoded credentials
- Use parameterized queries (no SQL injection)

All code must be production-ready with &gt;80% test coverage.&quot;&quot;&quot;,

    user_prompt_template=&quot;&quot;&quot;Generate {language} code for this requirement:

**Requirement:** {requirement}

**Context:**
{context}

**Constraints:**
{constraints}

**Expected Inputs/Outputs:**
{inputs_outputs}

Provide:
1. Implementation code with type hints
2. Unit tests with fixtures
3. Usage example
4. Brief explanation of design decisions&quot;&quot;&quot;,

    variables=[&quot;language&quot;, &quot;requirement&quot;, &quot;context&quot;, &quot;constraints&quot;, &quot;inputs_outputs&quot;],
    recommended_model=&quot;claude-3.5-sonnet&quot;,  # Best for code
    temperature=0.0
)
</code></pre>
<h4 id="compliance-qa">Compliance Q&amp;A</h4>
<pre><code class="language-python">COMPLIANCE_QA_TEMPLATE = PromptTemplate(
    template_id=&quot;compliance_qa_v1&quot;,
    system_prompt=&quot;&quot;&quot;You are a regulatory compliance expert for federal, healthcare,
and cybersecurity frameworks (FedRAMP, HIPAA, NIST 800-53, SOC 2).

Answer questions accurately using the provided RAG context.
Cite specific control numbers or regulatory sections.
If uncertain, say so rather than guessing.&quot;&quot;&quot;,

    user_prompt_template=&quot;&quot;&quot;Question: {question}

**RAG Context:**
{rag_context}

**Relevant Frameworks:** {frameworks}

Provide a detailed answer with:
1. Direct answer
2. Supporting regulatory citations
3. Implementation guidance (if applicable)
4. Related considerations&quot;&quot;&quot;,

    variables=[&quot;question&quot;, &quot;rag_context&quot;, &quot;frameworks&quot;],
    recommended_model=&quot;gemini-1.5-flash&quot;,
    temperature=0.0
)
</code></pre>
<hr />
<h2 id="quality-controls">Quality Controls</h2>
<h3 id="reproducibility">Reproducibility</h3>
<p><strong>Requirement:</strong> Same input → same output (&gt;95% consistency)</p>
<p><strong>Implementation:</strong></p>
<pre><code class="language-python"># Use temperature=0 for deterministic tasks
async def get_deterministic_response(
    prompt: str,
    model: str = &quot;gemini-1.5-flash&quot;
):
    response = await llm.generate(
        model=model,
        prompt=prompt,
        temperature=0.0,  # No randomness
        top_p=1.0,        # Full probability mass
        seed=42           # Fixed seed (if supported)
    )
    return response
</code></pre>
<p><strong>Testing:</strong></p>
<pre><code class="language-python">async def test_reproducibility():
    prompt = &quot;Explain HIPAA Security Rule §164.312(a)(1)&quot;

    responses = []
    for _ in range(10):
        response = await get_deterministic_response(prompt)
        responses.append(response)

    # All responses should be identical
    assert len(set(responses)) == 1, &quot;Responses are not reproducible&quot;
</code></pre>
<h3 id="output-validation">Output Validation</h3>
<p><strong>Requirement:</strong> Validate all AI-generated content before use</p>
<p><strong>Schema Validation:</strong></p>
<pre><code class="language-python">from pydantic import BaseModel, validator

class WorkflowPackOutput(BaseModel):
    &quot;&quot;&quot;Validate AI-generated WorkflowPack.&quot;&quot;&quot;
    workflow_id: str
    version: str
    steps: List[dict]

    @validator('version')
    def validate_version(cls, v):
        # Ensure semantic versioning
        if not re.match(r'^\d+\.\d+\.\d+$', v):
            raise ValueError(&quot;Invalid version format&quot;)
        return v

    @validator('steps')
    def validate_steps(cls, v):
        # Ensure at least one step
        if len(v) &lt; 1:
            raise ValueError(&quot;WorkflowPack must have at least one step&quot;)
        return v

async def validate_generated_workflow(ai_output: str) -&gt; WorkflowPackOutput:
    &quot;&quot;&quot;Validate AI-generated WorkflowPack.&quot;&quot;&quot;
    try:
        workflow_data = yaml.safe_load(ai_output)
        validated = WorkflowPackOutput(**workflow_data)
        return validated
    except Exception as e:
        logger.error(&quot;workflow.validation.failed&quot;, error=str(e))
        raise
</code></pre>
<h3 id="hallucination-detection">Hallucination Detection</h3>
<p><strong>Requirement:</strong> Detect and flag potentially hallucinated information</p>
<p><strong>Strategies:</strong>
1. <strong>RAG Citation Check:</strong> Ensure claims are grounded in retrieved context
2. <strong>Fact Verification:</strong> Cross-reference with knowledge base
3. <strong>Confidence Scoring:</strong> Track model confidence (if available)
4. <strong>Human Review:</strong> Flag low-confidence responses for review</p>
<pre><code class="language-python">def detect_hallucination(
    response: str,
    rag_context: List[str],
    confidence_threshold: float = 0.7
) -&gt; bool:
    &quot;&quot;&quot;Detect potential hallucinations in AI response.

    Returns:
        True if potential hallucination detected, False otherwise
    &quot;&quot;&quot;
    # 1. Check if key claims are in RAG context
    response_claims = extract_claims(response)

    grounded_claims = 0
    for claim in response_claims:
        if any(is_claim_in_context(claim, ctx) for ctx in rag_context):
            grounded_claims += 1

    grounding_ratio = grounded_claims / len(response_claims)

    # 2. Flag if &lt;70% of claims are grounded
    if grounding_ratio &lt; confidence_threshold:
        logger.warning(
            &quot;hallucination.detected&quot;,
            grounding_ratio=grounding_ratio,
            response_preview=response[:200]
        )
        return True

    return False
</code></pre>
<hr />
<h2 id="cost-management">Cost Management</h2>
<h3 id="budget-tracking">Budget Tracking</h3>
<p><strong>Per-Tenant Budget:</strong> Track AI costs by tenant
<strong>Monthly Limit:</strong> Alert at 80% of budget, block at 100%</p>
<pre><code class="language-python">from datetime import datetime, timedelta

async def track_ai_cost(
    tenant_id: str,
    model: str,
    input_tokens: int,
    output_tokens: int
):
    &quot;&quot;&quot;Track AI costs per tenant.&quot;&quot;&quot;
    # Get model pricing
    pricing = MODEL_PRICING[model]

    cost = (
        (input_tokens / 1000) * pricing[&quot;input&quot;] +
        (output_tokens / 1000) * pricing[&quot;output&quot;]
    )

    # Update tenant usage
    await db.execute(
        &quot;&quot;&quot;
        INSERT INTO ai_usage (tenant_id, model, cost, tokens_in, tokens_out, timestamp)
        VALUES (:tenant_id, :model, :cost, :tokens_in, :tokens_out, :timestamp)
        &quot;&quot;&quot;,
        {
            &quot;tenant_id&quot;: tenant_id,
            &quot;model&quot;: model,
            &quot;cost&quot;: cost,
            &quot;tokens_in&quot;: input_tokens,
            &quot;tokens_out&quot;: output_tokens,
            &quot;timestamp&quot;: datetime.utcnow()
        }
    )

    # Check budget
    month_start = datetime.utcnow().replace(day=1, hour=0, minute=0, second=0)
    monthly_cost = await db.fetch_val(
        &quot;&quot;&quot;
        SELECT SUM(cost) FROM ai_usage
        WHERE tenant_id = :tenant_id AND timestamp &gt;= :month_start
        &quot;&quot;&quot;,
        {&quot;tenant_id&quot;: tenant_id, &quot;month_start&quot;: month_start}
    )

    budget_limit = await get_tenant_ai_budget(tenant_id)

    if monthly_cost &gt;= budget_limit * 0.8:
        await alert_budget_threshold(tenant_id, monthly_cost, budget_limit)

    if monthly_cost &gt;= budget_limit:
        raise BudgetExceededError(f&quot;Monthly AI budget exceeded for {tenant_id}&quot;)
</code></pre>
<h3 id="model-pricing">Model Pricing</h3>
<pre><code class="language-python">MODEL_PRICING = {
    &quot;gemini-1.5-flash&quot;: {
        &quot;input&quot;: 0.00001875,   # per 1K tokens
        &quot;output&quot;: 0.000075
    },
    &quot;gemini-1.5-pro&quot;: {
        &quot;input&quot;: 0.000125,
        &quot;output&quot;: 0.000375
    },
    &quot;claude-3.5-sonnet&quot;: {
        &quot;input&quot;: 0.003,
        &quot;output&quot;: 0.015
    },
    &quot;gpt-4-turbo&quot;: {
        &quot;input&quot;: 0.01,
        &quot;output&quot;: 0.03
    }
}
</code></pre>
<h3 id="cost-optimization">Cost Optimization</h3>
<p><strong>Strategies:</strong>
1. <strong>Caching:</strong> Cache common responses (1-hour TTL)
2. <strong>Prompt Compression:</strong> Remove unnecessary tokens
3. <strong>Model Downgrading:</strong> Use cheaper models when appropriate
4. <strong>Batch Processing:</strong> Combine multiple requests</p>
<pre><code class="language-python">async def optimize_cost(
    task_type: str,
    complexity: str,
    cached_result_available: bool
):
    &quot;&quot;&quot;Optimize cost by selecting cheapest adequate model.&quot;&quot;&quot;
    if cached_result_available:
        return &quot;cache&quot;  # No cost

    if task_type in [&quot;explanation&quot;, &quot;qa&quot;] and complexity == &quot;simple&quot;:
        return &quot;gemini-1.5-flash&quot;  # Cheapest

    if complexity == &quot;moderate&quot;:
        return &quot;gemini-1.5-pro&quot;  # Mid-tier

    return &quot;gemini-1.5-pro&quot;  # Default (don't auto-select most expensive)
</code></pre>
<hr />
<h2 id="monitoring-alerting">Monitoring &amp; Alerting</h2>
<h3 id="key-metrics">Key Metrics</h3>
<p><strong>Usage Metrics:</strong>
- Requests per model (per tenant, per task type)
- Token consumption (input, output)
- Cost per tenant (daily, monthly)
- Model latency (p50, p95, p99)</p>
<p><strong>Quality Metrics:</strong>
- Error rate by model
- Validation failures (schema, hallucination)
- User feedback (thumbs up/down)
- Reproducibility score</p>
<p><strong>System Metrics:</strong>
- Model availability
- Rate limit violations
- Cache hit rate
- Retry rate</p>
<h3 id="dashboards">Dashboards</h3>
<pre><code class="language-python"># Grafana dashboard configuration
DASHBOARDS = {
    &quot;ai_usage&quot;: {
        &quot;requests_by_model&quot;: &quot;sum(ai.request.count) by (model)&quot;,
        &quot;cost_by_tenant&quot;: &quot;sum(ai.cost) by (tenant_id)&quot;,
        &quot;latency_by_model&quot;: &quot;histogram(ai.request.latency) by (model)&quot;,
        &quot;error_rate&quot;: &quot;sum(ai.request.errors) / sum(ai.request.count)&quot;
    },
    &quot;quality&quot;: {
        &quot;validation_failures&quot;: &quot;sum(ai.output.validation_failed)&quot;,
        &quot;hallucination_detections&quot;: &quot;sum(ai.hallucination.detected)&quot;,
        &quot;user_feedback_positive&quot;: &quot;sum(ai.feedback.positive) / sum(ai.feedback.total)&quot;
    }
}
</code></pre>
<h3 id="alerts">Alerts</h3>
<p><strong>Critical:</strong>
- Model unavailable for &gt;5 minutes
- Error rate &gt;5% (any model)
- Budget exceeded for any tenant</p>
<p><strong>Warning:</strong>
- Model latency p99 &gt;2x baseline
- Hallucination detection rate &gt;10%
- Cache hit rate &lt;50%</p>
<pre><code class="language-python">ALERTS = {
    &quot;model_unavailable&quot;: {
        &quot;condition&quot;: &quot;ai.model.available == 0&quot;,
        &quot;duration&quot;: &quot;5m&quot;,
        &quot;severity&quot;: &quot;critical&quot;,
        &quot;action&quot;: &quot;page_oncall&quot;
    },
    &quot;high_error_rate&quot;: {
        &quot;condition&quot;: &quot;ai.request.errors / ai.request.count &gt; 0.05&quot;,
        &quot;duration&quot;: &quot;10m&quot;,
        &quot;severity&quot;: &quot;critical&quot;,
        &quot;action&quot;: &quot;slack_alert&quot;
    },
    &quot;budget_warning&quot;: {
        &quot;condition&quot;: &quot;ai.cost.monthly &gt; budget * 0.8&quot;,
        &quot;duration&quot;: &quot;1m&quot;,
        &quot;severity&quot;: &quot;warning&quot;,
        &quot;action&quot;: &quot;email_admin&quot;
    }
}
</code></pre>
<hr />
<h2 id="fallback-resilience">Fallback &amp; Resilience</h2>
<h3 id="model-fallback-chain">Model Fallback Chain</h3>
<pre><code class="language-python">MODEL_FALLBACK_CHAIN = {
    &quot;claude-3.5-sonnet&quot;: [&quot;gemini-1.5-pro&quot;, &quot;gemini-1.5-flash&quot;],
    &quot;gpt-4-turbo&quot;: [&quot;gemini-1.5-pro&quot;, &quot;gemini-1.5-flash&quot;],
    &quot;gemini-1.5-pro&quot;: [&quot;gemini-1.5-flash&quot;],
    &quot;gemini-1.5-flash&quot;: []  # No fallback
}

async def call_with_fallback(
    prompt: str,
    primary_model: str,
    max_retries: int = 3
):
    &quot;&quot;&quot;Call AI model with automatic fallback.&quot;&quot;&quot;
    models_to_try = [primary_model] + MODEL_FALLBACK_CHAIN.get(primary_model, [])

    for model in models_to_try:
        try:
            response = await llm.generate(
                model=model,
                prompt=prompt,
                timeout=10  # 10 second timeout
            )
            return response
        except Exception as e:
            logger.warning(
                &quot;model.call.failed&quot;,
                model=model,
                error=str(e)
            )
            continue

    raise ModelUnavailableError(&quot;All models failed&quot;)
</code></pre>
<h3 id="circuit-breaker">Circuit Breaker</h3>
<pre><code class="language-python">from circuitbreaker import circuit

@circuit(failure_threshold=5, recovery_timeout=60)
async def call_llm(model: str, prompt: str):
    &quot;&quot;&quot;Call LLM with circuit breaker pattern.&quot;&quot;&quot;
    response = await llm_client.generate(model, prompt)
    return response
</code></pre>
<hr />
<h2 id="compliance-governance">Compliance &amp; Governance</h2>
<h3 id="model-approval-process">Model Approval Process</h3>
<p><strong>New Model Integration:</strong>
1. <strong>Security Review:</strong> Assess data handling, privacy, encryption
2. <strong>Compliance Review:</strong> Verify alignment with FedRAMP, HIPAA, SOC 2
3. <strong>Cost Analysis:</strong> Estimate monthly costs, ROI
4. <strong>Quality Testing:</strong> Benchmark on standard test sets
5. <strong>Pilot Testing:</strong> Limited rollout to select tenants
6. <strong>Production Approval:</strong> Final approval from architecture team</p>
<h3 id="data-handling">Data Handling</h3>
<p><strong>PII Protection:</strong>
- All input must be PII-redacted before LLM calls
- No PII in model training data (use commercial APIs only)
- Audit all prompts containing sensitive data</p>
<p><strong>Data Retention:</strong>
- Prompts: 90 days (for debugging)
- Responses: 30 days (for caching)
- Usage logs: 1 year (for billing)
- Audit logs: 7 years (compliance requirement)</p>
<hr />
<h2 id="changelog">Changelog</h2>
<p><strong>2025-10-01:</strong>
- Initial model selection strategy
- Defined routing rules and templates
- Configured Gemini 1.5 Flash/Pro as primary models
- Planned Claude and GPT-4 integration (Q1-Q2 2026)</p>
<hr />
<h2 id="contact">Contact</h2>
<p><strong>AI Model Strategy:</strong>
- AI Platform Team: ai-platform@sinergysolutions.ai
- Slack: #ai-model-selection</p>
<p><strong>Request New Model:</strong>
- Create GitHub issue with <code>ai-model-request</code> label
- Include use case, expected cost, and compliance considerations</p>
<hr />
<p><strong>Document Control</strong>
- <strong>Version:</strong> 1.0.0
- <strong>Last Updated:</strong> 2025-10-01
- <strong>Review Cycle:</strong> Quarterly
- <strong>Next Review:</strong> 2026-01-01
- <strong>Approvers:</strong> AI Platform Team + Architecture Team</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>